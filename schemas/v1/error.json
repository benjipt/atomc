{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://atomc.dev/schema/v1/error.json",
  "type": "object",
  "required": ["schema_version", "error"],
  "properties": {
    "schema_version": {"const": "v1"},
    "request_id": {"type": "string"},
    "error": {"$ref": "#/$defs/error"}
  },
  "additionalProperties": true,
  "$defs": {
    "error": {
      "type": "object",
      "required": ["code", "message"],
      "properties": {
        "code": {
          "enum": [
            "usage_error",
            "input_invalid",
            "config_error",
            "llm_runtime_error",
            "llm_parse_error",
            "git_error",
            "timeout"
          ]
        },
        "message": {"type": "string"},
        "details": {"type": "object"}
      },
      "additionalProperties": true
    }
  }
}
